/*! angular-lookup-directive 17-07-2015 */
!function () {
    "use strict";
    var a = function () {
        var a = '<div><input type="text" ng-keyup="search()"><ul><li ng-repeat="record in foundRecords"><a href="#" ng-click="onItemSelect(record)">{{record[lookupTextField]}}</a></li></ul></div>', b = function (a, b, c, d) {
            var e = b.find("input");
            a.onItemSelect = function (b) {
                e.val(b[a.lookupTextField]), d.$setViewValue(b[a.lookupValueField]), a.foundRecords = []
            }, a.search = function () {
                a.lookupDatasource()(e.val()).then(function (b) {
                    a.foundRecords = b
                })
            }
        };
        return {
            restrict: "E",
            scope: {lookupDatasource: "&", lookupTextField: "@", lookupValueField: "@"},
            require: "ngModel",
            template: a,
            link: b
        }
    };
    angular.module("ruaghain.lookup-directive", []).directive("customLookup", [a])
}();