/*! angular-lookup-directive 05-09-2015 */

!function(){"use strict";var a=["$http","$q"],b=function(a,b){var c='<div><input type="text" ng-model="value" class="ruaghain-lookup" ng-keyup="search()"><ul><li ng-repeat="record in foundRecords"><a href="#" ng-click="onItemSelect(record)">{{record[lookupTextField]}}</a></li></ul></div>',d=function(a,b,c,d){var e=b.find("input");d.$formatters.push(function(b){return b?{id:b[a.lookupValueField],value:b[a.lookupTextField]}:void 0}),d.$parsers.push(function(b){var c=b[a.lookupValueField],d=b[a.lookupTextField];return{id:c,value:d}}),d.$render=function(){a.id=d.$viewValue.id,a.value=d.$viewValue.value},a.onItemSelect=function(b){e.val(b[a.lookupTextField]),d.$setViewValue(b),a.foundRecords=[]},a.search=function(){a.findRestData(e).then(function(b){a.foundRecords=b})}},e=["$scope",function(c){c.findRestData=function(c){var d=b.defer(),e=this.lookupDatasource(),f=encodeURIComponent("%"+c.val()+"%");return a.get(e.baseUrl+e.searchUrl+f).then(function(a){e.payload(a.data)?d.resolve(e.payload(a.data)):d.reject()},function(a){throw d.reject(a),new Error("There was an error looking up information")}),d.promise}}];return{restrict:"E",scope:{lookupDatasource:"&",lookupTextField:"@",lookupValueField:"@"},require:"ngModel",template:c,link:d,controller:e}};b.$inject=a,angular.module("ruaghain.lookup-directive",[]).directive("customLookup",b)}();
//# sourceMappingURL=angular-lookup-directive.min.js.map